<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container mt-5">
    <h2>Featured Items</h2>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <% items.forEach((item, index) => { %>
            <li class="nav-item">
                <a class="nav-link <% if(index === 0) { %>active<% } %>" id="item<%= index %>-tab" data-toggle="tab" href="#item<%= index %>" role="tab" aria-controls="item<%= index %>" aria-selected="<%= index === 0 %>">Item <%= index + 1 %></a>
            </li>
        <% }) %>
    </ul>
    <div class="tab-content" id="myTabContent">
        <% items.forEach((item, index) => { %>
            <div class="tab-pane fade <% if(index === 0) { %>show active<% } %>" id="item<%= index %>" role="tabpanel" aria-labelledby="item<%= index %>-tab">
                <div id="carousel<%= index %>" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <% for(let i=0; i<item.images.length; i++) { %>
                            <li data-target="#carousel<%= index %>" data-slide-to="<%= i %>" <% if(i === 0) { %>class="active"<% } %>></li>
                        <% } %>
                    </ol>
                    <div class="carousel-inner">
                        <% item.images.forEach((image, i) => { %>
                            <div class="carousel-item <% if(i === 0) { %>active<% } %>">
                                <img src="<%= image %>" class="d-block w-100" alt="Slide <%= i + 1 %>">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5><%= item.name.kz %></h5>
                                    <p><%= item.description.kz %></p>
                                </div>
                            </div>
                        <% }) %>
                    </div>
                    <a class="carousel-control-prev" href="#carousel<%= index %>" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carousel<%= index %>" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        <% }) %>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Custom Script -->
<script>
    // Change carousel when switching tabs
    $('#myTab a').on('click', function (e) {
        e.preventDefault();
        $(this).tab('show');
        // Get the index of the clicked tab
        let index = $(this).parent().index();
        // Activate the corresponding carousel item
        $('#carousel' + index).carousel(0);
    });
</script>

</body>
</html>